<!doctype html>
<html lang="ru" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tech-docs/kubernetes/components/kubeadm/phases/phases" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">5.2.2.1. Фазы Kubeadm | in-cloud</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://example.com/tech-docs/kubernetes/components/kubeadm/phases/phases"><meta data-rh="true" property="og:locale" content="ru"><meta data-rh="true" name="docusaurus_locale" content="ru"><meta data-rh="true" name="docsearch:language" content="ru"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="5.2.2.1. Фазы Kubeadm | in-cloud"><meta data-rh="true" name="description" content="Прежде чем начать настройку кластера, надо разобраться какие этапы использует Kubeadm при инициализации ноды."><meta data-rh="true" property="og:description" content="Прежде чем начать настройку кластера, надо разобраться какие этапы использует Kubeadm при инициализации ноды."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://example.com/tech-docs/kubernetes/components/kubeadm/phases/phases"><link data-rh="true" rel="alternate" href="http://example.com/tech-docs/kubernetes/components/kubeadm/phases/phases" hreflang="ru"><link data-rh="true" rel="alternate" href="http://example.com/tech-docs/kubernetes/components/kubeadm/phases/phases" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="in-cloud RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="in-cloud Atom Feed">









<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" crossorigin="anonymous">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&amp;display=swap" crossorigin="anonymous">
<script src="/js/observer.js"></script><link rel="stylesheet" href="/assets/css/styles.f87febf4.css">
<script src="/assets/js/runtime~main.e61c621d.js" defer="defer"></script>
<script src="/assets/js/main.f64d9319.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Перейти к основному содержимому"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Перейти к основному содержимому</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Переключить навигационную панель" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">In Cloud</b></a><a class="navbar__item navbar__link" href="/tech-docs/kubernetes/about">Техническая документация</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/PRO-Robotech/in-cloud-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository">in-cloud-docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_node_modules-@docusaurus-theme-classic-lib-theme-Icon-ExternalLink-styles-module"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg><ul class="github-facts"><li class="github-fact github-fact--stars"></li><li class="github-fact github-fact--forks"></li></ul></a><div class="navbarSearchContainer_dCNk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Прокрутка к началу" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="theme-doc-markdown markdown"><header><h1>5.2.2.1. Фазы Kubeadm</h1></header>
<blockquote>
<p><strong>Прежде чем начать настройку кластера, надо разобраться какие этапы использует Kubeadm при инициализации ноды.</strong></p>
</blockquote>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">kubeadm init</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">kubeadm join</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">root@compute:/home/user</span><span class="token comment" style="color:rgb(98, 114, 164)"># kubeadm init phase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*****</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Available Commands:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  addon              Install required addons </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> passing conformance tests</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  bootstrap-token    Generates bootstrap tokens used to </span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token plain"> a </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> to a cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  certs              Certificate generation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  control-plane      Generate all static Pod manifest files necessary to establish the control plane</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  etcd               Generate static Pod manifest </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">local</span><span class="token plain"> etcd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  kubeconfig         Generate all kubeconfig files necessary to establish the control plane and the admin kubeconfig </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  kubelet-finalize   Updates settings relevant to the kubelet after TLS bootstrap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  kubelet-start      Write kubelet settings and </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">re</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">start the kubelet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  mark-control-plane Mark a </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> as a control-plane</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  preflight          Run pre-flight checks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  show-join-command  Show the </span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> control-plane and worker </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  upload-certs       Upload certificates to kubeadm-certs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  upload-config      Upload the kubeadm and kubelet configuration to a ConfigMap</span><br></span></code></pre></div></div>
<div class="scrollable-x"><table><thead><tr><th>Путь</th><th>Комментарий</th></tr></thead><tbody><tr><td><code>$addon.all</code></td><td>Устанавливает все дополнения</td></tr><tr><td><code>$addon.coredns</code></td><td>Устанавливает CoreDNS</td></tr><tr><td><code>$addon.kube-proxy</code></td><td>Ус танавливает kube-proxy</td></tr><tr><td><code>$certs.all</code></td><td>Генерирует все сертификаты</td></tr><tr><td><code>$certs.apiserver</code></td><td>Генерирует сертификат для Kubernetes API</td></tr><tr><td><code>$certs.apiserver-etcd-client</code></td><td>Генерирует сертификат apiserver для доступа к etcd</td></tr><tr><td><code>$certs.apiserver-kubelet-client</code></td><td>Генерирует сертификат apiserver для подключения к kubelet</td></tr><tr><td><code>ca</code></td><td>Генерирует самоподписанный Kubernetes ЦА</td></tr><tr><td><code>etcd-ca</code> </td><td>Генерирует самоподписанный ETCD ЦА</td></tr><tr><td><code>front-proxy-ca</code></td><td>Генерирует самоподписанный Front Proxy ЦА</td></tr><tr><td><code>etcd-healthcheck-client</code></td><td>Генерирует сертификат для liveness probes etcd</td></tr><tr><td><code>etcd-peer</code></td><td>Генерирует сертификат для связи узлов etcd</td></tr><tr><td><code>etcd-server</code></td><td>Генерирует сертификат etcd-сервера</td></tr><tr><td><code>front-proxy-client</code></td><td>Генерирует сертификат front-proxy клиента</td></tr><tr><td><code>sa</code></td><td>Генерирует ключи для подписи токенов сервисных аккаунтов</td></tr><tr><td><code>bootstrap-token</code></td><td>Генерирует bootstrap-токены</td></tr><tr><td><code>$control-plane.all</code></td><td>Генерирует все статические Pod манифесты</td></tr><tr><td><code>$control-plane.apiserver</code></td><td>Генерирует манифест Pod для kube-apiserver</td></tr><tr><td><code>$control-plane.controller-manager</code></td><td>Генерирует манифест Pod для kube-controller-manager</td></tr><tr><td><code>$control-plane.scheduler</code></td><td>Генерирует манифест Pod для kube-scheduler</td></tr><tr><td><code>$etcd.local</code></td><td>Генерирует манифест Pod для локального etcd</td></tr><tr><td><code>$kubeconfig.all</code></td><td>Генерирует все файлы kubeconfig</td></tr><tr><td><code>$kubeconfig.controller-manager</code></td><td>Генерирует kubeconfig для kube-controller-manager</td></tr><tr><td><code>$kubeconfig.kubelet</code></td><td>Генерирует kubeconfig для kubelet (инициализация кластера)</td></tr><tr><td><code>$kubeconfig.scheduler</code></td><td>Генерирует kubeconfig для планировщика</td></tr><tr><td><code>$kubeconfig.admin</code></td><td>Генерирует kubeconfig для администратора и kubeadm</td></tr><tr><td><code>$kubeconfig.super-admin</code></td><td>Генерирует kubeconfig для супер-администратора</td></tr><tr><td><code>$kubelet-finalize.all</code></td><td>Запускает все этапы kubelet-finalize</td></tr><tr><td><code>$kubelet-finalize.experimental-cert-rotation</code></td><td>Включает ротацию сертификатов kubelet</td></tr><tr><td><code>kubelet-start</code></td><td>Настраивает и запускает kubelet</td></tr><tr><td><code>mark-control-plane</code></td><td>Помечает узел как control plane</td></tr><tr><td><code>preflight</code></td><td>Выполняет предварительные проверки</td></tr><tr><td><code>show-join-command</code></td><td>Показывает команду для присоединения узлов</td></tr><tr><td><code>upload-certs</code></td><td>Загружает сертификаты в kubeadm-certs</td></tr><tr><td><code>$upload-config.all</code></td><td>Загружает всю конфигурацию в ConfigMap</td></tr><tr><td><code>$upload-config.kubeadm</code></td><td>Загружает kubeadm ClusterConfiguration в ConfigMap</td></tr><tr><td><code>$upload-config.kubelet</code></td><td>Загружает конфигурацию kubelet в ConfigMap</td></tr></tbody></table></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">root@compute:/home/user</span><span class="token comment" style="color:rgb(98, 114, 164)"># kubeadm join phase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*****</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Available Commands:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  control-plane-join    Join a machine as a control plane instance</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  control-plane-prepare Prepare the machine </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> serving a control plane</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  kubelet-start         Write kubelet settings, certificates and </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">re</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">start the kubelet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  preflight             Run </span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token plain"> pre-flight checks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  wait-control-plane    EXPERIMENTAL: Wait </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> the control plane to start</span><br></span></code></pre></div></div>
<div class="scrollable-x"><table><thead><tr><th>Путь</th><th>Комментарий</th></tr></thead><tbody><tr><td><code>$control-plane-join.all</code></td><td>Устанавливает все дополнения</td></tr><tr><td><code>$control-plane-join.etcd</code></td><td>Устанавливает CoreDNS</td></tr><tr><td><code>$control-plane-join.mark-control-plane</code></td><td>Устанавливает kube-proxy</td></tr><tr><td><code>$control-plane-prepare.all</code></td><td>Генерирует все сертификаты</td></tr><tr><td><code>$control-plane-prepare.control-plane</code></td><td>Генерирует сертификат для Kubernetes API</td></tr><tr><td><code>$control-plane-prepare.certs</code></td><td>Генерирует сертификат apiserver для доступа к etcd</td></tr><tr><td><code>$control-plane-prepare.download-certs</code></td><td>Генерирует сертификат apiserver для подключения к kubelet</td></tr><tr><td><code>$control-plane-prepare.kubeconfig</code></td><td>Генерирует самоподписанный Kubernetes ЦА</td></tr><tr><td><code>$kubelet-start</code> </td><td>Генерирует самоподписанный ETCD ЦА</td></tr><tr><td><code>$preflight</code></td><td>Генерирует самоподписанный Front Proxy ЦА</td></tr></tbody></table></div></div></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Страница документа"></nav></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"></div></footer></div>
<div id="medusa-root"></div>
<script charset="utf-8" src="/js/header-enabler.js"></script></body>
</html>