---
id: etcd-join
---
import { CUSTOM_VALUE } from '@site/src/constants/kubernetes/customValue'

import CodeBlock from '@theme/CodeBlock'
import dedent from 'dedent'

# 5.2.3.2.2 ETCD

## 5.2.3.2.2.1. Расширение ETCD 

<h4>Переменные окружния</h4>
<CodeBlock language="bash">
    {dedent`
        export BASE_K8S_PATH="${CUSTOM_VALUE.kuberneteBaseFolderPath.value}"
    `}
</CodeBlock>

<h4>Расширение ETCD</h4>
<CodeBlock language="bash">
    {dedent`
        kubeadm join phase control-plane-join etcd \
          --config=$\{BASE_K8S_PATH}/kubeadm.conf
    `}
</CodeBlock>

:::note
<CodeBlock language="bash">
    {dedent`
        [preflight] Reading configuration from the cluster...
        [preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'
        [etcd] Announced new etcd member joining to the existing etcd cluster
        [etcd] Creating static Pod manifest for "etcd"
        {"level":"warn","ts":"2025-02-23T14:02:01.514129Z","logger":"etcd-client","caller":"v3@v3.5.10/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000502fc0/83.222.26.71:2379","attempt":0,"error":"rpc error: code = FailedPrecondition desc = etcdserver: can only promote a learner member which is in sync with leader"}
        {"level":"warn","ts":"2025-02-23T14:02:02.004548Z","logger":"etcd-client","caller":"v3@v3.5.10/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000502fc0/83.222.26.71:2379","attempt":0,"error":"rpc error: code = FailedPrecondition desc = etcdserver: can only promote a learner member which is in sync with leader"}
        [etcd] Waiting for the new etcd member to join the cluster. This can take up to 40s
    `}
</CodeBlock>
:::
