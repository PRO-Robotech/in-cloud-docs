import TabItem from '@theme/TabItem'
import Tabs from '@theme/Tabs'

import CodeBlock from '@theme/CodeBlock'
import dedent from 'ts-dedent'

import { CUSTOM_VALUE } from '@site/src/constants/kubernetes/customValue'
import { KUBE_API_ARGS } from '@site/src/constants/kubernetes/kubeAPIArgs'

<Tabs groupId="install-type">

  <TabItem value='HardWay'>
    <details className="custom-gray-block">
    <summary>Role bindings</summary>

    <h4>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è</h4>
    <CodeBlock language="bash">
      {dedent`
        export AUTH_EXTRA_GROUPS="system:bootstrappers:kubeadm:default-node-token"
      `}
    </CodeBlock>

    <h4>–†–æ–ª–∏ –∏ —Å–≤—è–∑–∏</h4>

    > –≠—Ç–æ—Ç –±–ª–æ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º, —á—Ç–æ–±—ã kubeadm –º–æ–≥ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –ª–∏ –Ω–æ–¥–∞ —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –∏–ª–∏ –Ω–µ—Ç.

    <CodeBlock language="bash">
      {dedent`
        kubectl \\
          --kubeconfig=${CUSTOM_VALUE.kubernetesBaseFolderPath.value}/super-admin.conf apply -f - <<EOF
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          name: kubeadm:get-nodes
        rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: kubeadm:get-nodes
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: kubeadm:get-nodes
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: $\{AUTH_EXTRA_GROUPS}
        EOF
      `}
    </CodeBlock>

    > –≠—Ç–æ—Ç –±–ª–æ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∞–Ω–æ–Ω–∏–º–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, kubeadm –Ω–∞ —ç—Ç–∞–ø–µ discovery) –º–æ–≥–ª–∏ –ø–æ–ª—É—á–∏—Ç—å ConfigMap —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–ª–∞—Å—Ç–µ—Ä–µ (cluster-info) –∏–∑ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ kube-public. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API-—Å–µ—Ä–≤–µ—Ä—É –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å—å bootstrap-—Ç–æ–∫–µ–Ω–∞ –¥–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

    <CodeBlock language="bash">
      {dedent`
        kubectl \\
          --kubeconfig=${CUSTOM_VALUE.kubernetesBaseFolderPath.value}/super-admin.conf apply -f - <<EOF
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: Role
        metadata:
          name: kubeadm:bootstrap-signer-clusterinfo
          namespace: kube-public
        rules:
        - apiGroups:
          - ""
          resourceNames:
          - cluster-info
          resources:
          - configmaps
          verbs:
          - get
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: RoleBinding
        metadata:
          name: kubeadm:bootstrap-signer-clusterinfo
          namespace: kube-public
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: Role
          name: kubeadm:bootstrap-signer-clusterinfo
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: User
          name: system:anonymous
        EOF
      `}
    </CodeBlock>

    > –î–∞–Ω–Ω—ã–π –±–ª–æ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∞–≤ cluster-admin –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –≤—Ö–æ–¥—è—â–∏–º –≤ –≥—Ä—É–ø–ø—É kubeadm:cluster-admins. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫–ª–∞—Å—Ç–µ—Ä—É —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ ‚Äî –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –≥—Ä—É–ø–ø—ã system:masters, –æ—Ç–æ–∑–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∏–∑ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º—ã RBAC. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —É–ø—Ä–æ—â–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–æ–ª–µ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

    <CodeBlock language="bash">
      {dedent`
        kubectl \\
          --kubeconfig=${CUSTOM_VALUE.kubernetesBaseFolderPath.value}/super-admin.conf apply -f - <<EOF
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: kubeadm:cluster-admins
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: cluster-admin
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: kubeadm:cluster-admins
        EOF
      `}
    </CodeBlock>

    > –î–∞–Ω–Ω—ã–π –±–ª–æ–∫ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø—ã $\{AUTH_EXTRA_GROUPS} (–Ω–∞–ø—Ä–∏–º–µ—Ä, system:bootstrappers) –º–æ–≥–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bootstrap-—Ç–æ–∫–µ–Ω –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è kubelet –∫ –∫–ª–∞—Å—Ç–µ—Ä—É. –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Ä–æ–ª–∏ system:node-bootstrapper –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–∞–∫–∏–º —Å—É–±—ä–µ–∫—Ç–∞–º –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å TLS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è —É–∑–ª–æ–≤ —á–µ—Ä–µ–∑ CSR (CertificateSigningRequest), —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º —à–∞–≥–æ–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ kubeadm join.

    <CodeBlock language="bash">
      {dedent`
        kubectl \\
          --kubeconfig=${CUSTOM_VALUE.kubernetesBaseFolderPath.value}/super-admin.conf apply -f - <<EOF
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: kubeadm:kubelet-bootstrap
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:node-bootstrapper
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: $\{AUTH_EXTRA_GROUPS}
        EOF
      `}
    </CodeBlock>

    > –î–∞–Ω–Ω—ã–π –±–ª–æ–∫ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤—ã–¥–∞—á—É –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –æ—Ç —É–∑–ª–æ–≤, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—é—â–∏—Ö—Å—è –∫ –∫–ª–∞—Å—Ç–µ—Ä—É —á–µ—Ä–µ–∑ bootstrap-—Ç–æ–∫–µ–Ω. –û–Ω –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –≥—Ä—É–ø–ø–µ $\{AUTH_EXTRA_GROUPS} (–Ω–∞–ø—Ä–∏–º–µ—Ä, system:bootstrappers) —Ä–æ–ª—å system:certificates.k8s.io:certificatesigningrequests:nodeclient, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç kube-controller-manager –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å CSR –æ—Ç kubelet –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è kubeadm join.

    <CodeBlock language="bash">
      {dedent`
        kubectl \\
          --kubeconfig=${CUSTOM_VALUE.kubernetesBaseFolderPath.value}/super-admin.conf apply -f - <<EOF
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: kubeadm:node-autoapprove-bootstrap
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:certificates.k8s.io:certificatesigningrequests:nodeclient
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: $\{AUTH_EXTRA_GROUPS}
        EOF
      `}
    </CodeBlock>

    > –î–∞–Ω–Ω—ã–π –±–ª–æ–∫ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ kubelet. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥—Ä—É–ø–ø–µ system:nodes –ø—Ä–∞–≤–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —á–µ—Ä–µ–∑ CertificateSigningRequest. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Ä–æ—Ç–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —É–∑–ª–æ–≤ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞.

    <CodeBlock language="bash">
      {dedent`
        kubectl \\
          --kubeconfig=${CUSTOM_VALUE.kubernetesBaseFolderPath.value}/super-admin.conf apply -f - <<EOF
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: kubeadm:node-autoapprove-certificate-rotation
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: system:certificates.k8s.io:certificatesigningrequests:selfnodeclient
        subjects:
        - apiGroup: rbac.authorization.k8s.io
          kind: Group
          name: system:nodes
        EOF
      `}
    </CodeBlock>

    :::note
    <CodeBlock language="bash">
        {dedent`
            clusterrole.rbac.authorization.k8s.io/kubeadm:get-nodes created
            role.rbac.authorization.k8s.io/kubeadm:bootstrap-signer-clusterinfo created
            rolebinding.rbac.authorization.k8s.io/kubeadm:bootstrap-signer-clusterinfo created
            clusterrolebinding.rbac.authorization.k8s.io/kubeadm:cluster-admins created
            clusterrolebinding.rbac.authorization.k8s.io/kubeadm:get-nodes created
            clusterrolebinding.rbac.authorization.k8s.io/kubeadm:kubelet-bootstrap created
            clusterrolebinding.rbac.authorization.k8s.io/kubeadm:node-autoapprove-bootstrap created
            clusterrolebinding.rbac.authorization.k8s.io/kubeadm:node-autoapprove-certificate-rotation created
        `}
    </CodeBlock>
    :::
    </details>

  <details className="custom-gray-block">
    <summary>Bootstrap tokens</summary>
    <h4>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è</h4>
    <CodeBlock language="bash">
        {dedent`
            export AUTH_EXTRA_GROUPS="system:bootstrappers:kubeadm:default-node-token"
            export DESCRIPTION="kubeadm bootstrap token"
            export EXPIRATION=$(date -d '24 hours' "+%Y-%m-%dT%H:%M:%SZ")
            export TOKEN_ID="fjt9ex"
            export TOKEN_SECRET="lwzqgdlvoxtqk4yw"
            export USAGE_BOOTSTRAP_AUTHENTIFICATION="true"
            export USAGE_BOOTSTRAP_SIGNING="true"
        `}
    </CodeBlock>

    <h4>–°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞</h4>

    > –≠—Ç–æ—Ç —Ç–æ–∫–µ–Ω ‚Äî bootstrap-—Ç–æ–∫–µ–Ω, –∏ –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –Ω–æ–≤–æ–π –Ω–æ–¥–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä—É —á–µ—Ä–µ–∑ kubeadm join, –ø–æ–∫–∞ —É –Ω–µ—ë –µ—â—ë –Ω–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ kubeconfig-–∞.

    :::danger –í–Ω–∏–º–∞–Ω–∏–µ!
      –ü–æ–¥ –∫–∞–∂–¥—É—é –Ω–æ–¥—É –≤ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π bootstrap-—Ç–æ–∫–µ–Ω.
      –û–¥–Ω–∞–∫–æ, –¥–ª—è —Ü–µ–ª–µ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ (–∏ –≤ —Ä–∞–º–∫–∞—Ö –¥–∞–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏) –º—ã —É–ø—Ä–æ—Å—Ç–∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–∏–Ω –æ–±—â–∏–π —Ç–æ–∫–µ–Ω –¥–ª—è –≤—Å–µ—Ö —É–∑–ª–æ–≤ —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞.
    :::

    <CodeBlock>
      {dedent`
        kubectl \\
          --kubeconfig=${CUSTOM_VALUE.kubernetesBaseFolderPath.value}/super-admin.conf \\
          apply -f - <<EOF
        ---
        apiVersion: v1
        kind: Secret
        metadata:
          name: bootstrap-token-$\{TOKEN_ID}
          namespace: kube-system
        data:
          auth-extra-groups: $(echo -n "$AUTH_EXTRA_GROUPS" | base64)
          description: $(echo -n "$DESCRIPTION" | base64)
          expiration: $(echo -n "$EXPIRATION" | base64)
          token-id: $(echo -n "$TOKEN_ID" | base64)
          token-secret: $(echo -n "$TOKEN_SECRET" | base64)
          usage-bootstrap-authentication: $(echo -n "$USAGE_BOOTSTRAP_AUTHENTIFICATION" | base64)
          usage-bootstrap-signing: $(echo -n "$USAGE_BOOTSTRAP_SIGNING" | base64)
        type: bootstrap.kubernetes.io/token
        EOF
      `}

    </CodeBlock>

    :::note
    <CodeBlock language="bash">
        {dedent`
            secret/bootstrap-token-fjt9ex configured
        `}
    </CodeBlock>
    :::

  </details>

  <details className="custom-gray-block">
    <summary>Cluster-Info</summary>
    <h4>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è</h4>
    <CodeBlock language="bash">
      {dedent`
          export KUBE_CA_CRT_BASE64=$(base64 -w 0 /etc/kubernetes/pki/ca.crt)
          export CLUSTER_API_URL=https://api.${CUSTOM_VALUE.clusterName.value}.${CUSTOM_VALUE.kubernetesBaseDomain.value}
      `}
    </CodeBlock>

    <h4>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –°luster-info</h4>

    > cluster-info ‚Äî —ç—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–ª–∞—Å—Ç–µ—Ä–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ bootstrap-–ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —É–∑–ª–æ–≤ —á–µ—Ä–µ–∑ kubeadm.
      - üîê –°–æ–¥–µ—Ä–∂–∏—Ç –ø—É–±–ª–∏—á–Ω—ã–π kubeconfig —Å CA –∏ –∞–¥—Ä–µ—Å–æ–º API.
      - üì• –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è kubeadm join –¥–ª—è discovery.
      - üåê –î–æ—Å—Ç—É–ø–µ–Ω –∞–Ω–æ–Ω–∏–º–Ω–æ —á–µ—Ä–µ–∑ kube-public.
      - ‚úÖ –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–æ–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å API-—Å–µ—Ä–≤–µ—Ä–∞ –¥–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

    <CodeBlock>
      {dedent`
        kubectl \\
          --kubeconfig=${CUSTOM_VALUE.kubernetesBaseFolderPath.value}/super-admin.conf \\
          apply -f - <<EOF
        ---
        apiVersion: v1
        data:
          kubeconfig: |
            apiVersion: v1
            clusters:
            - cluster:
                certificate-authority-data: $\{KUBE_CA_CRT_BASE64}
                server: $\{CLUSTER_API_URL}:${KUBE_API_ARGS.securePort.value}
              name: ""
            contexts: null
            current-context: ""
            kind: Config
            preferences: {}
            users: null
        kind: ConfigMap
        metadata:
          name: cluster-info
          namespace: kube-public

        EOF
      `}

    </CodeBlock>

    :::note
    <CodeBlock language="bash">
        {dedent`
            configmap/cluster-info created
        `}
    </CodeBlock>
    :::

    </details>

  </TabItem>

  <TabItem value='Kubeadm'>

    <h4>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª–∏</h4>
    <CodeBlock language="bash">
      {dedent`
        kubeadm init phase bootstrap-token \\
          --config=${CUSTOM_VALUE.kubeadmBaseConfigPath.value}/kubeadm.yaml \\
          --kubeconfig=${CUSTOM_VALUE.kubernetesBaseFolderPath.value}/super-admin.conf
      `}
    </CodeBlock>

    :::note
    <CodeBlock language="bash">
      {dedent`
        [bootstrap-token] Using token: fjt9ex.lwzqgdlvoxtqk4yw
        [bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
        [bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to get nodes
        [bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
        [bootstrap-token] Configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
        [bootstrap-token] Configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
        [bootstrap-token] Creating the "cluster-info" ConfigMap in the "kube-public" namespace
      `}
    </CodeBlock>
    :::

  </TabItem>
</Tabs>
